<!doctype html>
<html lang="no">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bakst og Brygg | Bakeri og Kafé i Oslo. Bestill baguetter, kaker og kaffe online.</title>
  <meta name="description" content="Bakst og Brygg - Bakeri og Kafé i Oslo. Bestill baguetter, kaker og kaffe online.">
<link rel="stylesheet" id="main-css" href="css/styles.css" />
</head>

<body>
  <header id="header-container">
    <div id="nav-row">
      <nav class="header__nav">
        <img onclick="switchMenu('cafeMenu')" src="img/logo_bakst-og-brygg.webp" alt="Bakst og Brygg logo"
          class="header__logo-image">
        <button onclick="switchMenu('cafeMenu')" class="header-button">Meny</button>
        <button onclick="switchMenu('cakeThemes')" class="header-button">Kaketemaer</button>
        <button onclick="switchMenu('cakes')" class="header-button">Kaker</button>
      </nav>
      <button class="header-button cart-icon" id="cartLink" onclick="showShoppingCart()">Handlevogn (<span
          class="cart-count" id="cartCount">0</span>)
      </button>
    </div>
  </header>

  <div class="cart-notification" id="cartNotification">Produkt lagt til i handlekurven!</div>

  <div id="app"></div>

  <footer class="footer">
    <div class="footer__content">
      <div class="footer__section footer__section--contact">
        <h3 class="footer__title">Kontakt oss</h3>
        <p class="footer__text">Bakst og Brygg</p>
        <p class="footer__text">Telefon: 123 45 678</p>
        <p class="footer__text">E-post: kontakt@example.com</p>
      </div>
      <div class="footer__section footer__section--hours">
        <h3 class="footer__title">Åpningstider</h3>
        <p class="footer__text">Mandag - Fredag: 08:00 - 16:00</p>
        <p class="footer__text">Lørdag: 09:00 - 15:00</p>
        <p class="footer__text">Søndag: Stengt</p>
      </div>
      <div class="footer__section footer__section--address">
        <h3 class="footer__title">Besøk oss</h3>
        <p class="footer__text">Adresse: Slottsplassen 1, 0010 Oslo</p>
      </div>
    </div>
    <div class="footer__bottom">
      <p class="footer__copyright">&copy; 2024 Bakst og Brygg. Alle rettigheter reservert.</p>
      <a class="footer__link footer__link--admin" href="admin/">Gå til adminside</a>
    </div>
  </footer>


<!-- Dynamisk last inn verion.js med cache-busting via timestamp -->
<script>

    const timestamp = new Date().getTime();
    const versionScript = document.createElement('script');
    versionScript.src = `version.js?v=${timestamp}`;
    document.head.appendChild(versionScript);

    versionScript.onload = function(){
      const appVersion = window.appVersion || "default_version";
 
      const mainCss = document.getElementById('main-css');
      mainCss.href = `css/styles.css?v=${appVersion}`;
  
      const scripts = [
        "model.js",
        "common.js",
        "cafe-menu-view.js",
        "cake-menu-view.js",
        "theme-menu-view.js",
        "view.js",
        "cafe-menu-controller.js",
        "cake-menu-controller.js",
        "store/products.js",
        "js/cartView.js",
        "js/cartController.js",
        "server-requests.js",
        ];
     let loadedScripts = 0;
     const totalScripts = scripts.length;
     scripts.forEach(script => {
       const scriptElement = document.createElement('script');
       scriptElement.src = `${script}?v={appVersion}`;
       scriptElement.onload = function () {
         loadedScripts++;
         if (loadedScripts === totalScripts) {
           if (typeof updateView === "function") {
             updateView();
           }
         }
       };
       document.head.appendChild(scriptElement);
     });
};

window.onload = function() {
  let url = window.location.href;
if (!url.includes('?v=')) {
  if (url.includes('?')) {
    url = url + `&v=${timestamp}`
    } else {
      url = url + `?v=${timestamp}`;
    }
  }
  window.location.href = url;
};
</script>
</body>

</html>
