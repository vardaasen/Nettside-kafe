<!doctype html>
<html lang="no">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bakst og Brygg | Bakeri og Kafé i Oslo. Bestill baguetter, kaker og kaffe online.</title>
  <meta name="description" content="Bakst og Brygg - Bakeri og Kafé i Oslo. Bestill baguetter, kaker og kaffe online.">
<link rel="stylesheet" id="main-css" href="css/styles.css" />
</head>

<body>
  <header id="header-container">
    <div id="nav-row">
      <img onclick="switchMenu('cafeMenu')" src="img/logo_bakst-og-brygg.webp" alt="Bakst og Brygg logo"
        class="header__logo-image">

      <button id="hamburger-menu" class="header-hamburger" aria-label="Toggle navigation">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <nav class="header__nav">
        <button onclick="switchMenu('cafeMenu')" class="header-button">Meny</button>
        <button onclick="switchMenu('cakeThemes')" class="header-button">Temakaker</button>
        <button onclick="switchMenu('cakes')" class="header-button">Kaker</button>
      </nav>

      <button class="header-button header-cart" id="cartLink" onclick="showShoppingCart()">
        <svg class="cart-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
          stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        Handlevogn (<span class="cart-count" id="cartCount">0</span>)
      </button>
    </div>
  </header>

  <div class="cart-notification" id="cartNotification">Produkt lagt til i handlekurven!</div>

  <div id="app"></div>

  <footer class="footer">
    <div class="footer__content">
      <div class="footer__section footer__section--contact">
        <h3 class="footer__title">Kontakt oss</h3>
        <p class="footer__text">Bakst og Brygg</p>
        <p class="footer__text">Telefon: 123 45 678</p>
        <p class="footer__text">E-post: kontakt@example.com</p>
      </div>
      <div class="footer__section footer__section--hours">
        <h3 class="footer__title">Åpningstider</h3>
        <p class="footer__text">Mandag - Fredag: 08:00 - 16:00</p>
        <p class="footer__text">Lørdag: 09:00 - 15:00</p>
        <p class="footer__text">Søndag: Stengt</p>
      </div>
      <div class="footer__section footer__section--address">
        <h3 class="footer__title">Besøk oss</h3>
        <p class="footer__text">Adresse: Slottsplassen 1, 0010 Oslo</p>
      </div>
    </div>
    <div class="footer__bottom">
      <p class="footer__copyright">© 2024 Bakst og Brygg. Alle rettigheter reservert.</p>
      <a class="footer__link footer__link--admin" href="admin/">Ansattportal</a>
    </div>
  </footer>


<!-- Dynamisk last inn version.js med cache-busting via timestamp -->
<script>

    const timestamp = new Date().getTime();
    const versionScript = document.createElement('script');
    versionScript.src = `version.js?v=${timestamp}`;
    document.head.appendChild(versionScript);

    versionScript.onload = function(){
      const appVersion = window.appVersion || "default_version";
 
      const mainCss = document.getElementById('main-css');
      mainCss.href = `css/styles.css?v=${appVersion}`;
  
      const scripts = [
        "model.js",
        "common.js",
        "cafe-menu-view.js",
        "cake-menu-view.js",
        "theme-menu-view.js",
        "view.js",
        "cafe-menu-controller.js",
        "cake-menu-controller.js",
        "store/products.js",
        "js/cartView.js",
        "js/cartController.js",
        "firebase.js",
        "server-requests.js",
        ];
     let loadedScripts = 0;
     const totalScripts = scripts.length;
     scripts.forEach(script => {
       const scriptElement = document.createElement('script');
       scriptElement.src = `${script}?v={appVersion}`;
       scriptElement.onload = function () {
         loadedScripts++;
         if (loadedScripts === totalScripts) {
           if (typeof updateView === "function") {
             updateView();
           }
         }
       };
       document.head.appendChild(scriptElement);
     });
};
// sett inn url med unik url
//window.onload = function() {
//  let url = window.location.href;
//if (!url.includes('?v=')) {
//  if (url.includes('?')) {
//    url = url + `&v=${timestamp}`
//    } else {
//      url = url + `?v=${timestamp}`;
//    }
//  }
//  window.location.href = url;
//};
</script>

  <script>
    /* Hamburger menu */
    document.getElementById('hamburger-menu').addEventListener('click', function () {
      document.querySelector('#header-container').classList.toggle('is-active');
    });
    /* App */
    updateView();
  </script>
</body>

</html>
