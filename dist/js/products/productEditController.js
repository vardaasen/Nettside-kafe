let productEditController={init:function(){let t=parseInt(window.location.search.substring(1),10);var e=model.products.find(e=>e.productId===t);e?(this.product=e,document.querySelector("h1").innerHTML=`Rediger <em>${e.productName}</em>`,document.title=`Rediger "${e.productName}"`,productEditView.populateForm(e),"customizable"===e.type&&productEditView.showThemeForm(model.themes)):console.error("Produkt ikke funnet.")},saveProduct:function(e){e&&e.preventDefault();var e={...this.product,productName:document.getElementById("productName").value,unitPrice:parseFloat(document.getElementById("unitPrice").value),description:document.getElementById("description").value,unitsInStock:parseInt(document.getElementById("unitsInStock").value,10),preorderRequired:document.getElementById("preorderRequired")?.checked,customizationAvailable:document.getElementById("customizationAvailable")?.checked},t=model.products.findIndex(e=>e.productId===this.product.productId);-1!==t?(model.products[t]=e,saveModel(),alert("Produktet er oppdatert!"),window.location.reload(),window.location.href="./index.html"):console.error("Produkt ikke funnet i modellen.")},saveTheme:function(e,t){e&&e.preventDefault();var d,e=model.themes.findIndex(e=>e.themeId===t);-1===e?(console.log("Adding new theme to model"),d=0<model.themes.length?Math.max(...model.themes.map(e=>e.themeId))+1:1,t=d,model.themes.push({themeId:t,themeName:document.getElementById("themeName").value,basePrice:parseFloat(document.getElementById("themeBasePrice").value),description:document.getElementById("themeDescription").value})):model.themes[e]={themeId:t,themeName:document.getElementById("themeName").value,basePrice:parseFloat(document.getElementById("themeBasePrice").value),description:document.getElementById("themeDescription").value},model.themeImages[t]=document.getElementById("themeImageUrl").value,saveModel(),productEditView.updateThemeSelector(model.themes,t),productEditView.showThemeDetails(t),alert("Temaet er oppdatert!")},addTheme:function(e){e&&e.preventDefault(),console.log("Adding a new theme");e=0<model.themes.length?Math.max(...model.themes.map(e=>e.themeId))+1:1;productEditView.showThemeDetails(e,!0)},deleteTheme:function(e,t){e&&e.preventDefault(),console.log("Deleting theme with ID: "+t),model.themes=model.themes.filter(e=>e.themeId!==t),delete model.themeImages[t],saveModel(),productEditView.updateThemeSelector(model.themes),0<model.themes.length?productEditView.showThemeDetails(model.themes[0].themeId):document.getElementById("themeDetailsContainer").innerHTML="<p>Ingen temaer tilgjengelig.</p>",alert("Temaet er slettet!")}};document.addEventListener("DOMContentLoaded",()=>productEditController.init());